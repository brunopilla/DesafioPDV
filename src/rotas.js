const { Router } = require("express")
const { listarCategorias } = require("./controladores/categorias")
const { cadastrarUsuario, login, detalharUsuario, atualizarUsuario } = require("./controladores/usuarios")
const { schemaUsuario } = require("./Schemas/usuarios")
const { validarCorpoRequisicao } = require("./intermediarios/validarCorpoRequisicao")
const { verificarUsuarioLogado } = require("./intermediarios/autenticador")
const { cadastrarProduto, listarProduto, detalharProduto, atualizarProduto, excluirProduto } = require("./controladores/produtos")
const { schemaProduto } = require("./Schemas/produtos")
const { schemaCliente } = require("./Schemas/clientes")
const { cadastrarCliente, atualizarCliente, detalharCliente, listarClientes } = require("./controladores/clientes")
const { schemaLogin } = require("./Schemas/login")
const rotas = Router()

rotas.get("/categoria", listarCategorias)
rotas.post("/usuario", validarCorpoRequisicao(schemaUsuario), cadastrarUsuario)
rotas.post("/login", validarCorpoRequisicao(schemaLogin), login)
rotas.use(verificarUsuarioLogado)
rotas.get("/usuario", detalharUsuario)
rotas.put("/usuario", validarCorpoRequisicao(schemaUsuario), atualizarUsuario)
rotas.post("/produto", validarCorpoRequisicao(schemaProduto), cadastrarProduto)
rotas.put("/produto/:id", validarCorpoRequisicao(schemaProduto), atualizarProduto)
rotas.get("/produto", listarProduto)
rotas.get("/produto/:id", detalharProduto)
rotas.delete("/produto/:id", excluirProduto)
rotas.post("/cliente", validarCorpoRequisicao(schemaCliente), cadastrarCliente)
rotas.get("/cliente/:id", detalharCliente)
rotas.put("/cliente/:id", validarCorpoRequisicao(schemaCliente), atualizarCliente)
rotas.get("/cliente", listarClientes)


module.exports = rotas